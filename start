# copyleft 2015 teodorescu.serban@gmail.com

read -p "Is this the first set of containers on this host? [y/<any>]? " -n 1 -r
echo    # (optional) move to a new line
if [[ $REPLY =~ ^[Yy]$ ]]
then
    echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
    echo "Install and configure docker and docker-compose. Please wait."

    source hdx-install/1_install_and_configure

    echo "Install and configure docker and docker-compose complete."
    echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"

    echo "Please hit Ctrl+C if you saw an error."
    echo "Otherwise I will proceed to the next step in 10 seconds."
    sleep 10
else
    echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
    echo "Install and configure docker and docker-compose has been SKIPPED!"
    echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
fi

source hdx-install/2_review_vars_and_prepare_config_file

echo "Complete!"
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"

echo "Please hit Ctrl+C if you saw an error."
echo "Otherwise I will proceed to the next step in 10 seconds."
sleep 10


echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
echo "Add the hdx vhost file to host nginx."

read -p "Do you want to proceed? [y/<any>]? " -n 1 -r
echo    # (optional) move to a new line
if [[ $REPLY =~ ^[Yy]$ ]]
then
    source hdx-install/3_nginx_hdx
else
    echo "Skipped."
fi
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"

echo "All done. Cleaning up."
rm -rf hdx*
echo "Done."

echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
echo "You are ready to start the HDX environment!"
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
